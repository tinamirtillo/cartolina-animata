<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Cartolina animata ‚ú®</title>
<meta name="description" content="Una cartolina animata personalizzabile, perfetta per GitHub Pages" />
<style>
  :root{
    --bg1:#a1c4fd; /* light sky */
    --bg2:#c2e9fb; /* horizon */
    --accent:#ff7aa2; /* kawaii pink */
    --accent2:#7dd3fc; /* sky blue */
    --gold:#f5c542;
    --ink:#2b2b2b;
  }
  html,body{height:100%;margin:0;font-family: system-ui,-apple-system, "Segoe UI", Roboto, Noto Sans, "Hiragino Kaku Gothic ProN", "Yu Gothic", "Helvetica Neue", Arial, "Apple Color Emoji","Segoe UI Emoji"; color:var(--ink);}
  body{
    background: linear-gradient(180deg,var(--bg1),var(--bg2));
    overflow:hidden;
  }
  /* Stars */
  .star{position:absolute;width:2px;height:2px;background:rgba(255,255,255,.9); border-radius:50%; opacity:.8; animation: twinkle 2.4s infinite ease-in-out;}
  @keyframes twinkle{0%,100%{transform:scale(.6); opacity:.5}50%{transform:scale(1.2); opacity:1}}

  /* Floating clouds */
  .cloud{position:absolute; top:10vh; width:180px; height:60px; background:#fff; border-radius:50px; filter: drop-shadow(0 6px 12px rgba(0,0,0,.08)); opacity:.9;}
  .cloud::before,.cloud::after{content:""; position:absolute; background:#fff; border-radius:50%;}
  .cloud::before{width:80px;height:80px; left:20px; top:-35px}
  .cloud::after{width:90px;height:90px; right:30px; top:-45px}
  .cloud.a{left:-200px; animation: drift 38s linear infinite}
  .cloud.b{top:20vh; left:-240px; transform:scale(1.2); animation: drift 52s linear infinite}
  .cloud.c{top:30vh; left:-260px; transform:scale(.9); animation: drift 46s linear infinite}
  @keyframes drift{from{transform:translateX(0) scale(var(--s,1))} to{transform:translateX(120vw) scale(var(--s,1))}}

  /* Scene wrapper */
  .scene{position:relative; height:100%; display:grid; place-items:center;}

  /* Top bar */
  .topbar{position:fixed; top:12px; left:12px; right:12px; display:flex; justify-content:space-between; align-items:center; gap:8px; z-index:5}
  .chip{background: rgba(255,255,255,.6); backdrop-filter: blur(6px); padding:8px 12px; border-radius:999px; font-size:14px; display:flex; align-items:center; gap:8px}
  .chip button{all:unset; cursor:pointer; padding:6px 10px; border-radius:999px; background:#fff; box-shadow:0 2px 6px rgba(0,0,0,.08)}

  /* Center card */
  .card{position:relative; width:min(680px,86vw); border-radius:24px; padding:28px 24px 56px; background: rgba(255,255,255,.7); backdrop-filter: blur(10px); box-shadow: 0 20px 40px rgba(0,0,0,.12); text-align:center; z-index:3}
  .h1{font-size: clamp(28px,4vw,44px); font-weight:800; letter-spacing:.5px;}
  .h2{font-size: clamp(18px,2.6vw,24px); font-weight:600; opacity:.9; margin-top:6px}
  .btn{display:inline-block; margin-top:18px; padding:12px 18px; border-radius:999px; background:linear-gradient(90deg,var(--accent),var(--accent2)); color:#fff; font-weight:700; text-decoration:none; cursor:pointer; box-shadow:0 8px 18px rgba(0,0,0,.12); transition: transform .12s ease}
  .btn:active{transform:translateY(1px)}

  /* Reveal message */
  .message{font-size:clamp(22px,3vw,28px); line-height:1.5; margin-top:16px; display:none}
  .message.show{display:block; animation: pop .6s ease}
  @keyframes pop{0%{transform:scale(.98); opacity:0} 100%{transform:scale(1); opacity:1}}
  @keyframes floaty{0%{transform:translateY(0)} 50%{transform:translateY(-6px)} 100%{transform:translateY(0)} }

  /* Character block */
  .characters{position:relative; margin-top:18px; display:flex; justify-content:center; align-items:flex-end; gap:24px; flex-wrap:wrap}
  .char{position:relative; width:min(220px,40vw); text-align:center; display:flex; flex-direction:column; align-items:center}
  .char img{width:100%; height:auto; object-fit:contain; filter: drop-shadow(0 8px 14px rgba(0,0,0,.18));}
  .label{position:static; margin-bottom:10px; background:rgba(255,255,255,.9); backdrop-filter:blur(8px); padding:8px 14px; border-radius:999px; font-family:'Quicksand','Zen Maru Gothic',system-ui,sans-serif; font-weight:700; letter-spacing:.3px; box-shadow:0 2px 8px rgba(0,0,0,.08); text-shadow:0 1px 0 #fff, 0 0 6px rgba(255,255,255,.9); animation: floaty 3.6s ease-in-out infinite}

  /* Effects layers */
  #fw,#confetti{position:fixed; inset:0; pointer-events:none; z-index:4}

  /* Cinnamoroll snow */
  #snow{position:fixed; inset:0; pointer-events:none; z-index:2; overflow:hidden}
  .flake-wrap{position:absolute; top:-10vh; will-change: transform;}
  .flake{width: var(--size,32px); height:auto; opacity: var(--alpha,.9); filter: drop-shadow(0 2px 4px rgba(0,0,0,.1));}
  @keyframes fall { from{ transform: translateY(-10vh);} to{ transform: translateY(110vh);} }
  @keyframes sway { 0%{ transform: translateX(0);} 50%{ transform: translateX(var(--dx, 24px));} 100%{ transform: translateX(0);} }

  /* Footer note */
  .note{position:fixed; bottom:10px; right:12px; font-size:12px; opacity:.7}

  /* Mobile safe area spacing for bottom */
  @media (max-width:480px){ .card{padding-bottom:72px} }
</style>
<link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@600;700&family=Zen+Maru+Gothic:wght@500;700&display=swap" rel="stylesheet">
</head>
<body>
  <!-- Decorative stars -->
  <div id="stars"></div>
  <!-- Clouds -->
  <div class="cloud a" style="--s:1.0"></div>
  <div class="cloud b" style="--s:1.2"></div>
  <div class="cloud c" style="--s:0.9"></div>

  <!-- Cinnamoroll snow layer -->
  <div id="snow" aria-hidden="true"></div>

  <!-- Canvases for effects -->
  <canvas id="fw"></canvas>
  <canvas id="confetti"></canvas>

  <!-- UI -->
  <div class="topbar">
    <div class="chip" id="who">üéÄ <span id="toName">___ „Åï„Çì„Å∏</span></div>
    <div class="chip">üåê <button id="langJa">Êó•Êú¨Ë™û</button><button id="langIt">Italiano</button></div>
  </div>

  <main class="scene">
    <section class="card">
      <div class="h1" id="title">Â∞è„Åï„Å™„Çµ„Éó„É©„Ç§„Ç∫ ‚ú®</div>
      <div class="h2" id="subtitle">„ÇØ„É™„ÉÉ„ÇØ„Åó„Å¶Èñã„ÅÑ„Å¶„Åè„Å†„Åï„ÅÑ</div>
      <a class="btn" id="reveal">„Å≤„Çâ„Åè / Apri</a>
      <p class="message" id="msg"></p>

      <!-- Spotify/YouTube embed -->
      <div style="margin-top:20px">
        <iframe style="border-radius:12px" src="https://open.spotify.com/embed/track/5eyL6waluu7hXrRrWewBFU" width="100%" height="80" frameborder="0" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy"></iframe>
      </div>

      <!-- Characters -->
      <div class="characters" aria-label="Rappresentazioni Sanrio">
        <figure class="char">
          <div class="label">Martina (Tina)</div>
          <img src="./tina.png" alt="Poron (Sanrio)" />
        </figure>
        <figure class="char">
          <div class="label">Ayaka</div>
          <img src="./aya.png" alt="Hannari Komachi (Sanrio)" />
        </figure>
		<figure class="char">
          <div class="label">Fede</div>
          <img src="./fede.png" alt="Espresso (Sanrio)" />
        </figure>
      </div>
    </section>
  </main>

  <div class="note">Made with ‚ô° ‚Äî personalizzabile in alto a sinistra</div>

<script>
// ==== EASY PERSONALIZATION ===================================================
const CONFIG = {
  toName: "Ayaka",            // Nome destinataria (mostra "___ „Åï„Çì„Å∏" se vuoto)
  titleJA: "Â∞è„Åï„Å™„Çµ„Éó„É©„Ç§„Ç∫ ‚ú®",
  subtitleJA: "„ÇØ„É™„ÉÉ„ÇØ„Åó„Å¶Èñã„ÅÑ„Å¶„Åè„Å†„Åï„ÅÑ",
  messageJA: "„ÅäË™ïÁîüÊó•„Åä„ÇÅ„Åß„Å®„ÅÜ„ÄÅ„ÅÇ„ÇÑ„Åã„Åï„ÇìÔºÅ\nÂá∫‰ºö„Å£„Å¶„Åè„Çå„Å¶„ÅÇ„Çä„Åå„Å®„ÅÜ„ÄÇ„Åì„Çå„Åã„Çâ„ÇÇ„Çà„Çç„Åó„Åè„Å≠„ÄÇ\n„Éû„É´„ÉÜ„Ç£„Éä„Å®„Éï„Çß„Éá„É™„Ç´„Çà„Çä üíê",
  titleIT: "Una piccola sorpresa ‚ú®",
  subtitleIT: "Clicca per aprire",
  messageIT: "Buon compleanno, Ayaka!\nGrazie per la tua amicizia. Con affetto, Martina e Federica üíê"
};

// ==== STARFIELD ==============================================================
(function makeStars(){
  const wrap = document.getElementById('stars');
  for(let i=0;i<120;i++){
    const s=document.createElement('div'); s.className='star';
    s.style.left = Math.random()*100+'vw';
    s.style.top = Math.random()*60+'vh';
    s.style.animationDelay = (Math.random()*2)+'s';
    s.style.opacity = 0.5 + Math.random()*0.5;
    wrap.appendChild(s);
  }
})();

// ==== LANGUAGE TOGGLE ========================================================
let currentLang = 'ja';
const el = {
  toName: document.getElementById('toName'),
  title: document.getElementById('title'),
  subtitle: document.getElementById('subtitle'),
  msg: document.getElementById('msg'),
  btn: document.getElementById('reveal')
};

function applyLang(){
  el.toName.textContent = (CONFIG.toName ? CONFIG.toName : '___') + ' „Åï„Çì„Å∏';
  if(currentLang==='ja'){
    document.documentElement.lang='ja';
    el.title.textContent = CONFIG.titleJA;
    el.subtitle.textContent = CONFIG.subtitleJA;
    if(el.msg.dataset.shown==='1') el.msg.textContent = CONFIG.messageJA;
    el.btn.textContent = '„Å≤„Çâ„Åè / Apri';
  }else{
    document.documentElement.lang='it';
    el.title.textContent = CONFIG.titleIT;
    el.subtitle.textContent = CONFIG.subtitleIT;
    if(el.msg.dataset.shown==='1') el.msg.textContent = CONFIG.messageIT;
    el.btn.textContent = 'Apri / „Å≤„Çâ„Åè';
  }
}

document.getElementById('langJa').addEventListener('click',()=>{currentLang='ja'; applyLang();});
document.getElementById('langIt').addEventListener('click',()=>{currentLang='it'; applyLang();});
applyLang();

// ==== CINNAMOROLL SNOW (small and many) =====================================
(function cinnamorollSnow(){
  const SNOW = document.getElementById('snow');
  const IMG_URL = "https://www.pngall.com/wp-content/uploads/13/Cinnamoroll-PNG-Pic.png";
  const COUNT = 220; // tantissimi!
  const vw = () => Math.max(document.documentElement.clientWidth, window.innerWidth || 0);

  for(let i=0;i<COUNT;i++){
    const wrap = document.createElement('div');
    wrap.className = 'flake-wrap';
    const img = document.createElement('img');
    img.className = 'flake';
    img.src = IMG_URL;
    img.alt = 'Cinnamoroll';
    const size = 24 + Math.random()*20; // 24‚Äì44 px
    wrap.style.setProperty('--dx', (10 + Math.random()*30)+'px'); // sway amplitude
    img.style.setProperty('--size', size+'px');
    img.style.setProperty('--alpha', (0.6 + Math.random()*0.4).toString());
    wrap.style.left = Math.random()*vw() + 'px';
    wrap.style.animation = `sway ${3 + Math.random()*4}s ease-in-out ${Math.random()*6}s infinite`;
    img.style.animation = `fall ${8 + Math.random()*10}s linear ${Math.random()*8}s infinite`;
    wrap.appendChild(img);
    SNOW.appendChild(wrap);
  }
})();

// ==== REVEAL: CONFETTI + FIREWORKS ==========================================
const fw = document.getElementById('fw');
const confetti = document.getElementById('confetti');
let W,H; function resize(){W=fw.width=confetti.width=innerWidth; H=fw.height=innerHeight} resize();
addEventListener('resize',resize);

// Simple confetti
const confs=[]; function burstConfetti(cx,cy,count=120){
  for(let i=0;i<count;i++){
    confs.push({x:cx,y:cy, vx:(Math.random()-0.5)*6, vy:(Math.random()-1.2)*7, r:2+Math.random()*3, a:1, spin:Math.random()*6.28});
  }
}

// Simple fireworks
const sparks=[]; function firework(){
  const x = Math.random()*W*0.8 + W*0.1;
  const y = Math.random()*H*0.4 + H*0.1;
  const n = 80 + Math.floor(Math.random()*40);
  for(let i=0;i<n;i++){
    const ang = (i/n)*Math.PI*2; const sp = 2+Math.random()*3.5;
    sparks.push({x,y, vx:Math.cos(ang)*sp, vy:Math.sin(ang)*sp, life:60+Math.random()*30});
  }
}

setInterval(()=>{ if(el.msg.dataset.shown==='1'){ firework(); } }, 1200);

const ctxC = confetti.getContext('2d');
const ctxF = fw.getContext('2d');

function tick(){
  // confetti
  ctxC.clearRect(0,0,W,H);
  confs.forEach((p,i)=>{
    p.vy += 0.06; p.x += p.vx; p.y += p.vy; p.spin += 0.2; p.a -= 0.006;
    if(p.a<=0 || p.y>H+20){ confs.splice(i,1); return; }
    ctxC.globalAlpha = Math.max(p.a,0);
    ctxC.save(); ctxC.translate(p.x,p.y); ctxC.rotate(p.spin);
    ctxC.fillStyle = ['#ff7aa2','#7dd3fc','#f5c542','#a7f3d0','#fde68a'][i%5];
    ctxC.fillRect(-p.r,-p.r,p.r*2,p.r*2); ctxC.restore();
  });
  ctxC.globalAlpha = 1;

  // fireworks
  ctxF.fillStyle='rgba(0,0,0,0)'; ctxF.clearRect(0,0,W,H);
  ctxF.save(); ctxF.globalCompositeOperation='lighter';
  sparks.forEach((s,i)=>{
    s.vy += 0.01; s.x += s.vx; s.y += s.vy; s.life -= 1;
    const t = Math.max(s.life/80,0);
    const col = `hsl(${(i*7)%360} 90% ${50+Math.sin(i)*10}%)`;
    ctxF.fillStyle = col; ctxF.beginPath(); ctxF.arc(s.x,s.y,2.2*t+0.6,0,Math.PI*2); ctxF.fill();
    if(s.life<=0) sparks.splice(i,1);
  });
  ctxF.restore();

  requestAnimationFrame(tick);
}
requestAnimationFrame(tick);

// Reveal behavior
const btn = document.getElementById('reveal');
btn.addEventListener('click',()=>{
  el.msg.dataset.shown='1';
  el.msg.textContent = (currentLang==='ja') ? CONFIG.messageJA : CONFIG.messageIT;
  el.msg.classList.add('show');
  burstConfetti(innerWidth/2, innerHeight*0.4, 200);
  setTimeout(()=>burstConfetti(innerWidth*0.3, innerHeight*0.5, 120),250);
  setTimeout(()=>burstConfetti(innerWidth*0.7, innerHeight*0.5, 120),420);
});

// Small inline editor for the name via top-left chip (click to edit)
const who = document.getElementById('who');
who.addEventListener('click',()=>{
  const inp = prompt('Inserisci il nome della destinataria / ÂèóÂèñ‰∫∫„ÅÆÂêçÂâç„ÇíÂÖ•ÂäõÔºö', CONFIG.toName || '');
  if(inp!==null){ CONFIG.toName = inp.trim(); applyLang(); }
});
</script>
</body>
</html>
